const fs = require('fs');
const csv = require('csv-parser');

console.log('ğŸ” Checking CSV file structure...');

const results = [];
fs.createReadStream('./bin-list-data.csv')
  .pipe(csv())
  .on('data', (data) => results.push(data))
  .on('end', () => {
    console.log(`ğŸ“Š Total records: ${results.length}`);
    console.log('ğŸ“ Columns:', Object.keys(results[0]));
    
    // Check first 10 BINs
    console.log('ğŸ”¢ First 10 BINs:');
    results.slice(0, 10).forEach((row, index) => {
      console.log(`  ${index + 1}. BIN: ${row.BIN}, Brand: ${row.Brand}`);
    });
    
    // Check for common test BINs
    const testBINs = ['411111', '510510', '401288', '424242'];
    testBINs.forEach(bin => {
      const found = results.find(row => row.BIN === bin);
      console.log(`ğŸ¯ ${bin}: ${found ? 'FOUND âœ…' : 'NOT FOUND âŒ'}`);
    });
  });
